# Викторина

Чатботы Telegram и VK для игры в викторину.

Пользователю задается вопрос из заранее заготовленного списка и предлагается написать ответ. Затем оценивается правильность ответа.

## Как установить и запустить
- Заведите базу данных в [Redislabs](https://redislabs.com/)
- Сохраните адрес хоста, порт и пароль от базы данных
- [Создайте Telegram бота](https://telegram.me/BotFather), сохраните токен
- Создайте группу ВКонтакте, получите токен группы, перейдя в группу, затем в меню `Настройка -> Работа с API`
- Включите возможности ботов в группе `Настройка -> Сообщения -> Настройки для бота`
- Зарегистрируйтесь на [GitHub](https://github.com)
- Форкните данный [репозиторий](https://github.com/killla/support-bot)
- Зарегистрируйтесь на [Heroku](https://id.heroku.com/login)
- Создайте в Heroku приложение (app)
- На вкладке `Settings` в разделе `Config Vars` введите свои переменные окружения, которые перечислены в главе [Настройка](#настройка) данного README
- На вкладке `Settings` в разделе `Buildpacks` добавьте новый билдпак по [ссылке](https://github.com/gerywahyunugraha/heroku-google-application-credentials-buildpack) 
- На вкладке `Deploy` привяжите свой аккаунт GitHub к аккаунту Heroku
- В графе `Search for a repository to connect to` выберете свой GitHub аккаунт и репозиторий `quiz-bot`
- Нажмите `Search`, затем `Connect`
- Нажмите `Deploy Branch`
- На вкладке `Resources` включите процессы `tg_bot python3 tg_bot.py` и `vk_bot python3 vk_bot.py`

В указанный Telegram-чат придут сообщения `Телеграм бот запущен` и `VK бот запущен`.

## Настройка

Настройки берутся из переменных окружения. В Heroku переменные окружения указываются на вкладке `Settings` приложения в разделе `Config Vars`

Необходимо определить следующие переменные окружения:
- `TG_BOT_TOKEN` - токен Telegram бота поддержки
- `TG_LOG_BOT_TOKEN` - токен Telegram бота для отправки логов (можно одинаковый)
- `TG_LOG_CHAT_ID` - ID пользователя в Telegram
- `VK_TOKEN` - токен VK бота
- `FOLDER` - каталог с вопросами (необязательно)

## Добаление вопросов
Для обучение нужно подготовить файл (или несколько файлов) с вопросами и ответами в следущем формате:
```angular2html
Вопрос ... :
Текст вопроса

Ответ ... :
Текст ответа

Вопрос ... :
Текст вопроса

Ответ:
Текст ответа
```
Файлы положить в каталог. Каталог добавить в свой репозиторий.

Название каталога указать в переменной окружения `FOLDER`

## Пример результата
https://t.me/@team_b_test_bot

https://vk.com/im?sel=-149967104

## Цель проекта
Создание ботов для викторины.